#ifndef RecoEPUtility_h
#define RecoEPUtility_h

#include <TObject.h>

class TH1F;
class TH2F;

const int ngrp = 16;

const int nrun_grp1 = 1;
const int runno_grp1[nrun_grp1] = {405860};
const int nrun_grp2 = 27;
const int runno_grp2[nrun_grp2] = {405862,405863,405864,405865,405868,405869,405961,405962,405964,405966,405971,405972,405973,405975,405977,405981,405982,405984,405990,405995,405996,406087,406088,406089,406090,406093,406094};
const int nrun_grp3 = 75;
const int runno_grp3[nrun_grp3] = {406095,406099,406180,406181,406182,406183,406190,406257,406258,406259,406261,406263,406265,406266,406268,406539,406540,406543,406544,406546,406549,406555,406556,406579,406581,406582,406584,406661,406662,406663,406666,406671,406674,406675,406676,406677,406696,406697,406698,406700,406745,406746,406747,406748,406753,406754,406759,406760,406761,406762,406764,406766,406767,406769,406772,406773,406774,406830,406831,406832,406833,406848,406849,406850,406851,406853,406857,406858,406859,406861,406866,406867,406869,406870,406871};
const int nrun_grp4 = 20;
const int runno_grp4[nrun_grp4] = {406872,406881,406882,406887,406889,406891,406893,406898,406902,406905,406920,406921,407086,407143,407144,407145,407146,407147,407175,407176};
const int nrun_grp5 = 85;
const int runno_grp5[nrun_grp5] = {407178,407195,407196,407197,407198,407199,407200,407269,407270,407271,407272,407276,407361,407362,407367,407368,407369,407370,407371,407372,407375,407376,407377,407378,407379,407380,407381,407445,407447,407448,407454,407455,407456,407457,407459,407523,407524,407526,407558,407608,407610,407611,407614,407618,407620,407621,407660,407661,407662,407664,407666,407669,407670,407671,407672,407673,407675,407676,407711,407712,407786,407790,407792,407796,407797,407798,407799,407800,407802,407839,407842,407944,407945,407946,407947,407948,407950,407951,407953,407959,407960,407963,407964,407965,407966};
const int nrun_grp6 = 8;
const int runno_grp6[nrun_grp6] = {408070,408071,408073,408074,408075,408076,408077,408078};
const int nrun_grp7 = 152;
const int runno_grp7[nrun_grp7] = {408175,408176,408177,408181,408182,408183,408184,408217,408218,408219,408220,408224,408225,408226,408227,408229,408321,408322,408323,408324,408325,408328,408329,408330,408332,408333,408334,408335,408336,408404,408405,408406,408408,408409,408410,408432,408433,408434,408435,408436,408437,408438,408439,408440,408566,408567,408572,408573,408574,408575,408577,408578,408579,408580,408582,408583,408584,408585,408586,408587,408588,408589,408592,408641,408642,408643,408644,408645,408646,408647,408648,408649,408650,408670,408671,408672,408673,408674,408675,408798,408799,408801,408802,408803,408804,408805,408857,408858,408859,408860,408881,408882,408883,408885,408886,408887,408888,408889,408920,408921,408923,408924,408925,408994,408995,408996,408997,408998,408999,409004,409006,409009,409010,409011,409012,409014,409082,409084,409086,409087,409088,409089,409092,409115,409116,409118,409120,409121,409123,409124,409125,409147,409149,409150,409151,409152,409153,409154,409200,409222,409223,409224,409225,409226,409227,409228,409229,409230,409231,409232,409233,409235};
const int nrun_grp8 = 100;
const int runno_grp8[nrun_grp8] = {409236,409237,409239,409241,409243,409244,409295,409297,409298,409299,409300,409301,409302,409303,409304,409305,409306,409307,409308,409310,409311,409312,409313,409428,409429,409430,409431,409432,409433,409435,409436,409437,409438,409439,409440,409442,409443,409454,409455,409456,409457,409458,409459,409465,409467,409469,409471,409547,409548,409549,409550,409551,409552,409553,409554,409555,409611,409612,409613,409614,409616,409617,409619,409620,409622,409637,409638,409639,409640,409641,409642,409643,409644,409647,409678,409680,409681,409682,409683,409684,409687,409688,409694,409695,409696,409697,409698,409699,409700,409702,409703,409705,409706,409707,409709,409714,409716,409718,409720,409723};
const int nrun_grp9 = 8;
const int runno_grp9[nrun_grp9] = {409825,409826,409827,409828,409829,409830,409831,409832};
const int nrun_grp10 = 72;
const int runno_grp10[nrun_grp10] = {409833,409835,409836,409837,409838,409839,409840,409841,409842,409885,409887,409889,409890,409891,409892,409893,409894,409897,409900,409902,409967,409968,409971,409972,409973,409974,409975,409977,410009,410010,410011,410012,410013,410014,410015,410065,410066,410104,410105,410106,410107,410108,410110,410111,410112,410114,410115,410118,410119,410120,410122,410156,410158,410166,410167,410168,410169,410185,410221,410222,410224,410225,410226,410227,410228,410230,410231,410261,410262,410263,410265,410266};
const int nrun_grp11 = 1;
const int runno_grp11[nrun_grp11] = {410267};
const int nrun_grp12 = 84;
const int runno_grp12[nrun_grp12] = {410653,410654,410655,410656,410659,410668,410670,410675,410677,410678,410679,410680,410681,410682,410685,410718,410720,410721,410722,410723,410724,410725,410726,410728,410729,410748,410749,410750,410752,410753,410754,410759,410796,410797,410800,410802,410803,410808,410810,410835,410836,410837,410838,410839,410840,410841,410842,410843,410920,410921,410922,410923,410924,410929,410937,410938,410939,410940,410941,410942,410943,410944,411008,411009,411010,411011,411012,411013,411014,411015,411018,411019,411020,411022,411024,411025,411139,411152,411154,411155,411156,411158,411159,411173};
const int nrun_grp13 = 78;
const int runno_grp13[nrun_grp13] = {411266,411267,411268,411269,411270,411271,411272,411273,411274,411275,411276,411277,411349,411350,411351,411352,411353,411354,411356,411404,411408,411411,411419,411422,411423,411425,411456,411458,411459,411460,411461,411462,411497,411500,411501,411502,411503,411504,411506,411507,411508,411509,411540,411541,411542,411543,411544,411545,411551,411553,411554,411555,411556,411557,411558,411559,411561,411596,411597,411598,411599,411600,411601,411602,411635,411636,411637,411638,411639,411640,411643,411644,411645,411649,411651,411652,411763,411764};
const int nrun_grp14 = 153;
const int runno_grp14[nrun_grp14] = {411767,411817,411818,411819,411823,411825,411826,411912,411913,411914,411915,411916,411918,411921,411922,411924,411925,411926,411991,411992,411993,411994,411995,412065,412067,412068,412069,412090,412092,412093,412094,412097,412098,412099,412101,412102,412148,412149,412150,412214,412215,412216,412317,412318,412319,412320,412321,412322,412324,412326,412328,412329,412407,412410,412411,412412,412413,412414,412415,412416,412417,412419,412424,412426,412427,412428,412429,412430,412431,412433,412483,412484,412485,412486,412487,412488,412489,412490,412491,412512,412514,412515,412516,412517,412518,412519,412520,412521,412523,412646,412647,412648,412651,412652,412653,412655,412705,412706,412707,412708,412709,412742,412743,412745,412804,412805,412806,412807,412808,412836,412841,412842,412843,412847,412848,412849,412850,412851,412878,412879,412881,412882,412883,412884,412932,412933,412934,412979,412984,412985,412986,412987,412988,412990,412993,412994,413074,413075,413076,413077,413078,413079,413080,413081,413086,413087,413088,413089,413090,413092,413142,413143,413144};
const int nrun_grp15 = 75;
const int runno_grp15[nrun_grp15] = {413146,413148,413149,413150,413151,413154,413155,413157,413158,413160,413162,413163,413164,413165,413183,413187,413240,413241,413242,413243,413264,413265,413267,413268,413382,413383,413384,413392,413435,413436,413439,413440,413508,413511,413512,413513,413514,413539,413540,413541,413542,413543,413544,413546,413549,413551,413552,413553,413555,413556,413557,413560,413561,413562,413563,413564,413603,413604,413605,413607,413608,413609,413610,413611,413612,413631,413633,413634,413636,413637,413638,413639,413642,413643,413662};
const int nrun_grp16 = 201;
const int runno_grp16[nrun_grp16] = {413663,413664,413665,413666,413667,413669,413672,413708,413709,413710,413712,413715,413716,413717,413721,413722,413723,413724,413747,413748,413749,413750,413751,413752,413753,413755,413756,413843,413844,413924,413925,413926,413927,413931,413932,413933,413934,413936,413940,414048,414049,414050,414051,414052,414053,414059,414060,414061,414071,414072,414073,414074,414075,414076,414077,414078,414079,414132,414133,414134,414135,414136,414138,414140,414148,414149,414150,414151,414152,414153,414154,414156,414157,414158,414186,414187,414191,414195,414196,414197,414198,414200,414201,414202,414203,414204,414205,414206,414207,414284,414285,414294,414309,414310,414311,414312,414327,414328,414329,414330,414331,414332,414334,414335,414336,414337,414338,414339,414340,414424,414425,414427,414428,414430,414431,414432,414434,414499,414505,414507,414511,414512,414515,414517,414518,414519,414520,414557,414559,414560,414562,414563,414564,414565,414599,414604,414605,414606,414607,414608,414609,414610,414626,414627,414629,414631,414632,414633,414634,414635,414636,414702,414703,414704,414705,414706,414707,414726,414728,414729,414731,414732,414824,414825,414826,414827,414828,414829,414830,414832,414847,414848,414849,414850,414851,414852,414853,414854,414855,414856,414857,414884,414885,414886,414887,414888,414889,414890,414892,414893,414899,414976,414978,414979,414980,414981,414982,414985,414986,414987,414988};


class RecoEPUtility : public TObject
{
  public:
    RecoEPUtility();
    virtual ~RecoEPUtility();

    bool read_in_recal_consts();
    int get_recal_group(int run_num);
    float get_recal_charge(int PmtIndx, int run_num, int ADC);
    float get_pedestal(int PmtIndx, int run_num);
    float get_mip(int PmtIndx, int run_num);
    bool isSaturatePMT(int PmtIndx);
    bool isBadPMT(int PmtIndx, int run_num);

  private:

    float const_pedestal[128][ngrp];
    float const_mip[128][ngrp];

    ClassDef(RecoEPUtility,1)
};
#endif
